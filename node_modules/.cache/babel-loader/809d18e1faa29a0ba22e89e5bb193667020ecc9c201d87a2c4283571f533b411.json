{"ast":null,"code":"var _jsxFileName = \"/Users/mschwendeman/CascadeProjects/beef-stick-no-beef-stick-image/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MODEL_URL = process.env.PUBLIC_URL + \"/models\";\nconst ANALYSIS_TIMEOUT = 15000; // 15 seconds\n\nfunction App() {\n  _s();\n  const [result, setResult] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const inputRef = useRef();\n\n  // Load face-api.js models on demand\n  const loadModels = async () => {\n    try {\n      await faceapi.nets.ssdMobilenetv1.loadFromUri(MODEL_URL);\n      await faceapi.nets.ageGenderNet.loadFromUri(MODEL_URL);\n    } catch (err) {\n      throw new Error(\"Model files not found or failed to load. Check /public/models/ directory and browser console for 404 errors.\");\n    }\n  };\n  const handleImageUpload = async event => {\n    setResult(\"\");\n    setError(\"\");\n    setLoading(true);\n    const file = event.target.files[0];\n    if (!file) {\n      setLoading(false);\n      return;\n    }\n    const url = URL.createObjectURL(file);\n    setImageUrl(url);\n    let timeoutId;\n    try {\n      await loadModels();\n      const img = new window.Image();\n      img.src = url;\n      img.onload = async () => {\n        let finished = false;\n        timeoutId = setTimeout(() => {\n          if (!finished) {\n            setLoading(false);\n            setError(\"Analysis timed out. Please try a smaller image or check your model files.\");\n          }\n        }, ANALYSIS_TIMEOUT);\n        try {\n          const detections = await faceapi.detectSingleFace(img).withAgeAndGender();\n          finished = true;\n          clearTimeout(timeoutId);\n          if (!detections) {\n            setResult(\"young\"); // Not a human\n          } else {\n            setResult(detections.age >= 4 ? \"old\" : \"young\");\n          }\n        } catch (err) {\n          finished = true;\n          clearTimeout(timeoutId);\n          setError(\"Face detection failed: \" + err.message);\n        }\n        setLoading(false);\n      };\n      img.onerror = () => {\n        setLoading(false);\n        setError(\"Failed to load image. Try a different file.\");\n      };\n    } catch (err) {\n      setLoading(false);\n      setError(err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Beef Stick No Beef Stick (Image)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleImageUpload,\n      ref: inputRef,\n      className: \"file-input\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Analyzing...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this), result && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: result === \"old\" ? \"/oldImage.PNG\" : \"/youngImage.PNG\",\n        alt: result,\n        style: {\n          maxWidth: \"220px\",\n          width: \"100%\",\n          borderRadius: \"12px\",\n          boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageUrl,\n        alt: \"Uploaded preview\",\n        style: {\n          maxWidth: \"180px\",\n          marginTop: 16,\n          borderRadius: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ZiUa1f14cFalDkkqfDpcuKnLnuQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useState","faceapi","jsxDEV","_jsxDEV","MODEL_URL","process","env","PUBLIC_URL","ANALYSIS_TIMEOUT","App","_s","result","setResult","loading","setLoading","imageUrl","setImageUrl","error","setError","inputRef","loadModels","nets","ssdMobilenetv1","loadFromUri","ageGenderNet","err","Error","handleImageUpload","event","file","target","files","url","URL","createObjectURL","timeoutId","img","window","Image","src","onload","finished","setTimeout","detections","detectSingleFace","withAgeAndGender","clearTimeout","age","message","onerror","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","ref","alt","style","maxWidth","width","borderRadius","boxShadow","marginTop","_c","$RefreshReg$"],"sources":["/Users/mschwendeman/CascadeProjects/beef-stick-no-beef-stick-image/src/App.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport \"./App.css\";\n\nconst MODEL_URL = process.env.PUBLIC_URL + \"/models\";\nconst ANALYSIS_TIMEOUT = 15000; // 15 seconds\n\nfunction App() {\n  const [result, setResult] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const inputRef = useRef();\n\n  // Load face-api.js models on demand\n  const loadModels = async () => {\n    try {\n      await faceapi.nets.ssdMobilenetv1.loadFromUri(MODEL_URL);\n      await faceapi.nets.ageGenderNet.loadFromUri(MODEL_URL);\n    } catch (err) {\n      throw new Error(\"Model files not found or failed to load. Check /public/models/ directory and browser console for 404 errors.\");\n    }\n  };\n\n  const handleImageUpload = async (event) => {\n    setResult(\"\");\n    setError(\"\");\n    setLoading(true);\n    const file = event.target.files[0];\n    if (!file) {\n      setLoading(false);\n      return;\n    }\n    const url = URL.createObjectURL(file);\n    setImageUrl(url);\n    let timeoutId;\n    try {\n      await loadModels();\n      const img = new window.Image();\n      img.src = url;\n      img.onload = async () => {\n        let finished = false;\n        timeoutId = setTimeout(() => {\n          if (!finished) {\n            setLoading(false);\n            setError(\"Analysis timed out. Please try a smaller image or check your model files.\");\n          }\n        }, ANALYSIS_TIMEOUT);\n        try {\n          const detections = await faceapi.detectSingleFace(img).withAgeAndGender();\n          finished = true;\n          clearTimeout(timeoutId);\n          if (!detections) {\n            setResult(\"young\"); // Not a human\n          } else {\n            setResult(detections.age >= 4 ? \"old\" : \"young\");\n          }\n        } catch (err) {\n          finished = true;\n          clearTimeout(timeoutId);\n          setError(\"Face detection failed: \" + err.message);\n        }\n        setLoading(false);\n      };\n      img.onerror = () => {\n        setLoading(false);\n        setError(\"Failed to load image. Try a different file.\");\n      };\n    } catch (err) {\n      setLoading(false);\n      setError(err.message);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Beef Stick No Beef Stick (Image)</h1>\n      <input\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleImageUpload}\n        ref={inputRef}\n        className=\"file-input\"\n      />\n      {loading && <div className=\"loading\">Analyzing...</div>}\n      {error && <div className=\"error\">{error}</div>}\n      {result && !error && (\n        <div className=\"result\">\n          <img\n            src={result === \"old\" ? \"/oldImage.PNG\" : \"/youngImage.PNG\"}\n            alt={result}\n            style={{ maxWidth: \"220px\", width: \"100%\", borderRadius: \"12px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\" }}\n          />\n        </div>\n      )}\n      {imageUrl && (\n        <div className=\"preview\">\n          <img src={imageUrl} alt=\"Uploaded preview\" style={{ maxWidth: \"180px\", marginTop: 16, borderRadius: 8 }} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}